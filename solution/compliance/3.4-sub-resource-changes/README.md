# 企业多账号场景下订阅特定资源配置变更

## 方案介绍
当企业有多个云账号，不同账号内会有许多不同的云资源。企业内部安全合规团队如果想重点关注某些特定规则的资源变更情况。比如只关注特定全名规则的RAM角色是否发生了修改，并且希望把这份修改事件投递到企业内部的管理系统用于后续审计分析。

## 前置条件
- 确保已在「企业管理账号」中开通资源目录，并且将其他账号邀请到资源目录中。具体操作，请参见云治理中心-资源结构初始化。
- 确保已在「企业管理账号」中开启多账号的配置审计功能。具体操作，请参见云治理中心-统一配置防护规则。
- 确保在各个成员账号中开通事件总线。具体操作，请参见开通事件总线。
- 确保在「日志账号」中开通事件总线及函数计算，创建相应的数据库及授权。具体操作，请参见开通事件总线 和 开通函数计算。



## 操作步骤

1. 下载代码包，解压到某个目录。目录结构如下：
   ```
   ├── python               // 通过Python实现的快速搭建脚本
     ├── __init__.py        // 定义操作OpenApi所需要的AK/SK   
     ├── subscription.py
   ├── main.tf              // 操作入口文件，无需修改
   ├── settings.tfvars      // 配置文件，可以根据自身需要修改
   ├── README.md            // 操作文档，无需修改
   └── variables.tf         // 用到的变量定义，无需修改
   ```

2. 方式一：使用Python执行自动化配置

2.1 使用编辑器打开 `python/__init__.py` 这个文件，根据注释，修改该文件内的配置项
   
   - 将主账号的AK、SK填入`master_account_access_key`和`master_account_secret_key`中
   
2.2 进入python目录，运行`python subscription.py`

3. 方式二：使用Terraform方式执行自动化配置

4.1 

